
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Predicting ESG Categories and Polarities &#8212; eKorpkit Tutorials</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/ekorpkit.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ESG Topic Analysis" href="../../research/esg_topics/analyst.html" />
    <link rel="prev" title="Training Classifiers for ESG Ratings" href="classifiers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FN4GFT8HP8"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-FN4GFT8HP8');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/ekorpkit.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">eKorpkit Tutorials</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    eKonomic Research Python Toolkit
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../basics/index.html">
   Getting started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/install.html">
     Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/usage.html">
     Usage
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../basics/features/index.html">
   Key features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/features/easy_config.html">
     Easy Configuration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/features/no_boiler.html">
     No Boilerplate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/features/workflows.html">
     Workflows
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/features/share.html">
     Sharable and Reproducible
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../basics/features/plug.html">
     Pluggable Architece
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/config/index.html">
   Configuring ekorpkit
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/config/eKonf.html">
     Using eKonf class
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/datasets/index.html">
   Datasets
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/corpora/corpus.html">
     Build and Load Corpora
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/datasets/dataset.html">
     Build and Load Datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/corpora/pipeline.html">
     Corpus task pipelines
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/models/index.html">
   Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/models/automl/index.html">
     Auto ML
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/models/embeddings/index.html">
     Word Embeddings
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/embeddings/word2vec_basics.html">
       Word2Vec Basics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/embeddings/eval_vectors.html">
       Evaluate pretrained embeddings
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/models/ngram/index.html">
     N-Grams
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/ngram/ngram.html">
       N-Grams
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/ngram/ngram_for_lexicons.html">
       N-Gram model for ngram lexicon features
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/ngram/ngram_for_words.html">
       N-Gram model for unigram lexicon features
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/models/sentiment/index.html">
     Sentiment Analyers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/sentiment/lbsa_en.html">
       Lexicon-based Sentiment Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/sentiment/financial_phrasebank_lm.html">
       Evaluate LM with financial phrasebank
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/sentiment/sentiment.html">
       LM Dictionary vs. finbert vs. T5
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/models/transformers/index.html">
     Transformers
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/models/art/index.html">
     AI Art (Text-to-Image)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/art/disco.html">
       Disco Diffusion
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/models/art/dalle-mini.html">
       DALL·E Mini
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/pipelines/index.html">
   Pipelines
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/pipelines/pipeline.html">
     Instantiating pipeline
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/preprocessors/index.html">
   Preprocessors
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/preprocessors/normalizer/index.html">
     Normalizers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/preprocessors/normalizer/normalizer.html">
       Normalizers
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/preprocessors/segmenter/index.html">
     Segmenters
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/preprocessors/segmenter/segmenter.html">
       Segmenters
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../tutorials/preprocessors/tokenizer/index.html">
     Tokenizers
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../tutorials/preprocessors/tokenizer/mecab.html">
       Mecab Tokenizer
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/visualizers/index.html">
   Visualizers
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/visualizers/plot.html">
     Plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../tutorials/workflow/index.html">
   Workflows
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Datasets
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../corpus/ekorpkot_corpus.html">
   The eKorpkit Corpus
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Use Cases
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../fomc/index.html">
   FOMC
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/02_FOMC_numerical_data.html">
     Preparing Numerical Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/03_FOMC_corpus.html">
     Preparing Textual Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/04_FOMC_EDA_numericals.html">
     EDA on Numerical Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/05_FOMC_features.html">
     Visualizing Features
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/06_FOMC_AutoML.html">
     Checking Baseline with AutoML
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/07_FOMC_sentiments.html">
     Predicting Sentiments of FOMC Corpus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/08_FOMC_EDA_sentiments.html">
     EDA on Sentiment Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../fomc/09_FOMC_AutoML_with_tones.html">
     Predicting the next decisions with tones
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../bok/index.html">
   Bank of Korea
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../edgar/index.html">
   EDGAR
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../edgar/predict_edgar.html">
     Prediciting Sentiments
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   ESG
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="snorkel.html">
     Preparing classification datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="econ_news_corpus.html">
     Building
     <code class="docutils literal notranslate">
      <span class="pre">
       econ_news_kr
      </span>
     </code>
     corpus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="classifiers.html">
     Training Classifiers for ESG Ratings
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Predicting ESG Categories and Polarities
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Research
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../research/esg_topics/analyst.html">
   ESG Topic Analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/intro/index.html">
   Introduction to NLP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/deep/index.html">
   Deep Learning for NLP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lectures/ds/index.html">
   Data Science for Economics and Finance
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/index.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/entelecheia/ekorpkit-book/main?urlpath=tree/ekorpkit-book/docs/usecases/esg/predict_news.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/entelecheia/ekorpkit-book/blob/main/ekorpkit-book/docs/usecases/esg/predict_news.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/entelecheia/ekorpkit-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/entelecheia/ekorpkit-book/issues/new?title=Issue%20on%20page%20%2Fdocs/usecases/esg/predict_news.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/docs/usecases/esg/predict_news.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-data">
   Load data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predicting-polarities">
   Predicting polarities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predicting-categories">
   Predicting categories
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Predicting ESG Categories and Polarities</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-data">
   Load data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predicting-polarities">
   Predicting polarities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#predicting-categories">
   Predicting categories
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="predicting-esg-categories-and-polarities">
<h1>Predicting ESG Categories and Polarities<a class="headerlink" href="#predicting-esg-categories-and-polarities" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">config</span> InlineBackend.figure_format=&#39;retina&#39;
<span class="kn">from</span> <span class="nn">ekorpkit</span> <span class="kn">import</span> <span class="n">eKonf</span>

<span class="n">eKonf</span><span class="o">.</span><span class="n">setLogger</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;version:&quot;</span><span class="p">,</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is notebook?&quot;</span><span class="p">,</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">is_notebook</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is colab?&quot;</span><span class="p">,</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">is_colab</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;evironment varialbles:&quot;</span><span class="p">)</span>
<span class="n">eKonf</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">eKonf</span><span class="o">.</span><span class="n">env</span><span class="p">()</span><span class="o">.</span><span class="n">dict</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.base:Google Colab not detected.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>version: 0.1.38
is notebook? True
is colab? False
evironment varialbles:
{&#39;CUDA_DEVICE_ORDER&#39;: None,
 &#39;CUDA_VISIBLE_DEVICES&#39;: None,
 &#39;EKORPKIT_CONFIG_DIR&#39;: &#39;/workspace/projects/ekorpkit-book/config&#39;,
 &#39;EKORPKIT_DATA_DIR&#39;: None,
 &#39;EKORPKIT_LOG_LEVEL&#39;: &#39;INFO&#39;,
 &#39;EKORPKIT_PROJECT&#39;: &#39;ekorpkit-book&#39;,
 &#39;EKORPKIT_WORKSPACE_ROOT&#39;: &#39;/workspace&#39;,
 &#39;KMP_DUPLICATE_LIB_OK&#39;: &#39;TRUE&#39;,
 &#39;NUM_WORKERS&#39;: 230}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="s2">&quot;../data/econ_news_kr&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="load-data">
<h2>Load data<a class="headerlink" href="#load-data" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_data</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;econ_news_filtered.parquet&quot;</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">)</span>
<span class="n">filtered_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/econ_news_filtered.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>56849</th>
      <td>1089862</td>
      <td>0</td>
      <td>[출처=카드고릴라]\n카드사들이 연초부터 연일 신상품을 쏟아내고 있다. 새 카드로 ...</td>
      <td>02100851.20220223082114001.txt</td>
    </tr>
    <tr>
      <th>56850</th>
      <td>1089862</td>
      <td>1</td>
      <td>가장 인기가 많은 카드사는 신한카드였다. 신한카드는 개별 상품페이지 관련 23%의 ...</td>
      <td>02100851.20220223082114001.txt</td>
    </tr>
    <tr>
      <th>56851</th>
      <td>1089862</td>
      <td>2</td>
      <td>이용자들이 가장 많이 검색한 혜택은 교통(14.9%)이었다. 평균 사용 연령층이 더...</td>
      <td>02100851.20220223082114001.txt</td>
    </tr>
    <tr>
      <th>56852</th>
      <td>1089862</td>
      <td>3</td>
      <td>따라서 올해에는 무실적, 또는 실적 조건이 낮아 사용 부담이 적으면서 모든 가맹점에...</td>
      <td>02100851.20220223082114001.txt</td>
    </tr>
    <tr>
      <th>56853</th>
      <td>1089863</td>
      <td>0</td>
      <td>제 39차 부동산시장 점검 관계장관회의\n홍남기 부총리 겸 기획재정부 장관이 23일...</td>
      <td>02100851.20220223082114001.txt</td>
    </tr>
  </tbody>
</table>
<p>56854 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_data</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">222</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;65년 역사를 자랑하는 버스 전문 제조업체 자일대우상용차가 내년 울산공장 재가동을 목표로 노사 협상을 이어가고 있다.\n9일 자동차업계에 따르면 지난 7일 자일대우 노사는 교섭을 열고 정리해고 철회와 공장 정상화 방안에 대한 논의를 진행했다. 양측은 울산공장 재가동에 대해 공감대를 이뤘지만 생산인력 축소 등에서 의견 차를 좁히지 못한 것으로 전해졌다. 다만 이달 말까지 지속적으로 교섭을 이어가면서 공장 운영을 재개하기 위해 노력하기로 했다.\n자일대우는 1955년 대우버스 전신인 신진공업사로 출발한 버스 전문업체다. 1987년 신진공업사의 부도로 대우그룹 품에 안겼지만 2002년 GM이 대우자동차를 매각하는 과정에서 분리돼 다음 해인 2003년 영안모자그룹에 인수됐다. 2018년 자일대우상용차로 사명을 변경하면서 65년 역사를 이어왔다. 자일대우는 한때 현대·기아자동차와 함께 국내 버스 시장을 양분했지만 최근 몇 년 새 내리막길을 걷고 있다. 한국자동차산업협회에 따르면 자일대우의 버스 판매량은 2013년 3903대로 정점을 찍은 뒤 2016년 2942대, 2018년 1991대 등으로 6년 새 반 토막 났다. 이 같은 경영 악화로 업계 안팎에서는 공장 폐쇄는 물론 해외 업체로의 공장 매각설까지 불거졌다. 이에 대해 자일대우 측은 &quot;울산공장과 관련해 중국 BYD를 포함한 어떠한 기업과도 인수, 매각 등과 관련한 협의를 진행한 바 없다&quot;며 &quot;BYD가 자일대우 울산공장을 실사한 바 없고, 회사는 직원들과 작은 규모라도 국내에서 생산을 유지하는 방안에 대해 지속적으로 협의하고 있다&quot;고 밝혔다.&#39;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="predicting-polarities">
<h2>Predicting polarities<a class="headerlink" href="#predicting-polarities" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">=</span><span class="p">[</span>
    <span class="s1">&#39;+model/transformer=classification&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+model/transformer/pretrained=ekonelectra-base&#39;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">model_cfg</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="s1">&#39;model/transformer=classification&#39;</span><span class="p">,</span> <span class="n">overrides</span><span class="p">)</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;esg_polarity&quot;</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">num_train_epochs</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_seq_length</span> <span class="o">=</span> <span class="mi">256</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">train_batch_size</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">eval_batch_size</span> <span class="o">=</span> <span class="mi">32</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">config_group</span><span class="o">=</span><span class="s1">&#39;pipeline&#39;</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;esg_polarities&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">data_file</span> <span class="o">=</span> <span class="s1">&#39;econ_news_filtered.parquet&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">_pipeline_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;predict&#39;</span><span class="p">]</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model_cfg</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">output_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">-preds.parquet&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">num_workers</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">preds_df</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">instantiate</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">preds_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.base:Loaded .env from /workspace/projects/ekorpkit-book/config/.env
INFO:ekorpkit.base:IPython version: (6, 9, 0), client: jupyter_client
INFO:ekorpkit.io.file:Processing [1] files from [&#39;econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/econ_news_filtered.parquet
INFO:ekorpkit.pipelines.pipe:Applying pipeline: OrderedDict([(&#39;predict&#39;, &#39;predict&#39;)])
INFO:ekorpkit.base:Applying pipe: functools.partial(&lt;function predict at 0x7fcf1454b040&gt;)
INFO:ekorpkit.base:No method defined to call
INFO:ekorpkit.models.transformer.simple:Loaded model from /workspace/projects/ekorpkit-book/outputs/esg_polarity/ekonelectra-base/best_model
INFO:simpletransformers.classification.classification_model: Converting to features started. Cache is not used.
INFO:simpletransformers.classification.classification_model: Sliding window enabled
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "4642f4b9cb4b473fad47e1e1a0822f4e", "version_major": 2, "version_minor": 0}
</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Token indices sequence length is longer than the specified maximum sequence length for this model (543 &gt; 512). Running this sequence through the model will result in indexing errors
INFO:simpletransformers.classification.classification_model: 56854 features created from 56854 samples.
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "25bf59fb19814edc9ab027d80bf84a60", "version_major": 2, "version_minor": 0}
</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.models.transformer.simple:type of raw_outputs: &lt;class &#39;list&#39;&gt;
INFO:ekorpkit.models.transformer.simple:raw_output: [-2.616201639175415, 1.3725110292434692, 1.5585768222808838]
INFO:ekorpkit.pipelines.pipe:Saving data to: {&#39;file&#39;: &#39;esg_polarities-preds.parquet&#39;, &#39;filename&#39;: &#39;esg_polarities-preds.parquet&#39;, &#39;base_dir&#39;: &#39;../data/econ_news_kr&#39;, &#39;filetype&#39;: &#39;&#39;, &#39;columns&#39;: None, &#39;suffix&#39;: None, &#39;filepath&#39;: &#39;../data/econ_news_kr/esg_polarities-preds.parquet&#39;}
INFO:ekorpkit.io.file:Saving dataframe to ../data/econ_news_kr/esg_polarities-preds.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
      <th>pred_labels</th>
      <th>raw_preds</th>
      <th>pred_probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
      <td>Positive</td>
      <td>[-2.616201639175415, 1.3725110292434692, 1.558...</td>
      <td>0.541830</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
      <td>Neutral</td>
      <td>[-1.743383765220642, 3.050320625305176, -0.924...</td>
      <td>0.973645</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>Neutral</td>
      <td>[-1.7145445346832275, 2.7398393154144287, -0.6...</td>
      <td>0.401355</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>Neutral</td>
      <td>[-1.3195880651474, 2.872457504272461, -1.18959...</td>
      <td>0.968683</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
      <td>Neutral</td>
      <td>[-2.1306374073028564, 2.276362419128418, 0.191...</td>
      <td>0.879886</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xls_path</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;esg_polarities-preds.xlsx&quot;</span><span class="p">)</span>
<span class="n">preds_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">xls_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="predicting-categories">
<h2>Predicting categories<a class="headerlink" href="#predicting-categories" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">overrides</span><span class="o">=</span><span class="p">[</span>
    <span class="s1">&#39;+model/transformer=classification&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+model/transformer/pretrained=ekonelectra-base&#39;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">model_cfg</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="s1">&#39;model/transformer=classification&#39;</span><span class="p">,</span> <span class="n">overrides</span><span class="p">)</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;esg_topics&quot;</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">num_train_epochs</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_seq_length</span> <span class="o">=</span> <span class="mi">256</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">train_batch_size</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">model_cfg</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">eval_batch_size</span> <span class="o">=</span> <span class="mi">32</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">config_group</span><span class="o">=</span><span class="s1">&#39;pipeline&#39;</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;esg_categories&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">data_file</span> <span class="o">=</span> <span class="s1">&#39;econ_news_filtered.parquet&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">_pipeline_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;predict&#39;</span><span class="p">]</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model_cfg</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">data_dir</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">predict</span><span class="o">.</span><span class="n">output_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">cfg</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">-preds.parquet&#39;</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">num_workers</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">cat_preds_df</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">instantiate</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">cat_preds_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/econ_news_filtered.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/econ_news_filtered.parquet
INFO:ekorpkit.pipelines.pipe:Applying pipeline: OrderedDict([(&#39;predict&#39;, &#39;predict&#39;)])
INFO:ekorpkit.base:Applying pipe: functools.partial(&lt;function predict at 0x7fcf1454b040&gt;)
INFO:ekorpkit.base:No method defined to call
INFO:ekorpkit.models.transformer.simple:Loaded model from /workspace/projects/ekorpkit-book/outputs/esg_topics/ekonelectra-base/best_model
INFO:simpletransformers.classification.classification_model: Converting to features started. Cache is not used.
INFO:simpletransformers.classification.classification_model: Sliding window enabled
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "186fe647a23c4786a5463208a3d1c20f", "version_major": 2, "version_minor": 0}
</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Token indices sequence length is longer than the specified maximum sequence length for this model (543 &gt; 512). Running this sequence through the model will result in indexing errors
INFO:simpletransformers.classification.classification_model: 56854 features created from 56854 samples.
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "eaef08a6649849c287e09cff81fd9057", "version_major": 2, "version_minor": 0}
</script><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.models.transformer.simple:type of raw_outputs: &lt;class &#39;list&#39;&gt;
INFO:ekorpkit.models.transformer.simple:raw_output: [-0.3635081648826599, 0.37070703506469727, -0.0803101435303688, 1.6292757987976074, 3.845372438430786, -1.571161150932312, -1.3662763833999634, 2.5274786949157715, -0.5879923701286316, -0.42675259709358215, -0.8758111596107483, -1.8513715267181396, 0.061824191361665726, 0.6198759078979492, -1.7138009071350098, -1.8754594326019287]
INFO:ekorpkit.pipelines.pipe:Saving data to: {&#39;file&#39;: &#39;esg_categories-preds.parquet&#39;, &#39;filename&#39;: &#39;esg_categories-preds.parquet&#39;, &#39;base_dir&#39;: &#39;../data/econ_news_kr&#39;, &#39;filetype&#39;: &#39;&#39;, &#39;columns&#39;: None, &#39;suffix&#39;: None, &#39;filepath&#39;: &#39;../data/econ_news_kr/esg_categories-preds.parquet&#39;}
INFO:ekorpkit.io.file:Saving dataframe to ../data/econ_news_kr/esg_categories-preds.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
      <th>pred_labels</th>
      <th>raw_preds</th>
      <th>pred_probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.3635081648826599, 0.37070703506469727, -0....</td>
      <td>0.641072</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.1256369799375534, 0.20957696437835693, 0.0...</td>
      <td>0.506109</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.8959301710128784, 1.594657301902771, -0.44...</td>
      <td>0.346036</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9104948043823242, 1.5245412588119507, -0.5...</td>
      <td>0.853084</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9264926910400391, 1.6014995574951172, -0.6...</td>
      <td>0.875771</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xls_path</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;esg_categories-preds.xlsx&quot;</span><span class="p">)</span>
<span class="n">cat_preds_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">xls_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat_preds_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
      <th>pred_labels</th>
      <th>raw_preds</th>
      <th>pred_probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.3635081648826599, 0.37070703506469727, -0....</td>
      <td>0.641072</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.1256369799375534, 0.20957696437835693, 0.0...</td>
      <td>0.506109</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.8959301710128784, 1.594657301902771, -0.44...</td>
      <td>0.346036</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9104948043823242, 1.5245412588119507, -0.5...</td>
      <td>0.853084</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9264926910400391, 1.6014995574951172, -0.6...</td>
      <td>0.875771</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>56849</th>
      <td>1089862</td>
      <td>0</td>
      <td>[출처=카드고릴라]\n카드사들이 연초부터 연일 신상품을 쏟아내고 있다. 새 카드로 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.22719579935073853, 0.01108001358807087, 0....</td>
      <td>0.322013</td>
    </tr>
    <tr>
      <th>56850</th>
      <td>1089862</td>
      <td>1</td>
      <td>가장 인기가 많은 카드사는 신한카드였다. 신한카드는 개별 상품페이지 관련 23%의 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.4069870114326477, 0.3556715250015259, 0.29...</td>
      <td>0.396827</td>
    </tr>
    <tr>
      <th>56851</th>
      <td>1089862</td>
      <td>2</td>
      <td>이용자들이 가장 많이 검색한 혜택은 교통(14.9%)이었다. 평균 사용 연령층이 더...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.2538611888885498, 0.12173940986394882, 0.1...</td>
      <td>0.406933</td>
    </tr>
    <tr>
      <th>56852</th>
      <td>1089862</td>
      <td>3</td>
      <td>따라서 올해에는 무실적, 또는 실적 조건이 낮아 사용 부담이 적으면서 모든 가맹점에...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.3447725772857666, 0.5259126424789429, 0.19...</td>
      <td>0.784171</td>
    </tr>
    <tr>
      <th>56853</th>
      <td>1089863</td>
      <td>0</td>
      <td>제 39차 부동산시장 점검 관계장관회의\n홍남기 부총리 겸 기획재정부 장관이 23일...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[0.4430272877216339, 0.10475224256515503, 1.87...</td>
      <td>0.296401</td>
    </tr>
  </tbody>
</table>
<p>56854 rows × 7 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">polarity_preds_df</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;esg_polarities-preds.parquet&quot;</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">)</span>
<span class="n">polarity_preds_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;esg_polarities-preds.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/esg_polarities-preds.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/esg_polarities-preds.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
      <th>pred_labels</th>
      <th>raw_preds</th>
      <th>pred_probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
      <td>Positive</td>
      <td>[-2.616201639175415, 1.3725110292434692, 1.558...</td>
      <td>0.541830</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
      <td>Neutral</td>
      <td>[-1.743383765220642, 3.050320625305176, -0.924...</td>
      <td>0.973645</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>Neutral</td>
      <td>[-1.7145445346832275, 2.7398393154144287, -0.6...</td>
      <td>0.401355</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>Neutral</td>
      <td>[-1.3195880651474, 2.872457504272461, -1.18959...</td>
      <td>0.968683</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
      <td>Neutral</td>
      <td>[-2.1306374073028564, 2.276362419128418, 0.191...</td>
      <td>0.879886</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>56849</th>
      <td>1089862</td>
      <td>0</td>
      <td>[출처=카드고릴라]\n카드사들이 연초부터 연일 신상품을 쏟아내고 있다. 새 카드로 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>Neutral</td>
      <td>[-2.320831060409546, 2.678330659866333, 0.0352...</td>
      <td>0.348214</td>
    </tr>
    <tr>
      <th>56850</th>
      <td>1089862</td>
      <td>1</td>
      <td>가장 인기가 많은 카드사는 신한카드였다. 신한카드는 개별 상품페이지 관련 23%의 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>Neutral</td>
      <td>[-2.2986679077148438, 2.5738255977630615, 0.13...</td>
      <td>0.487420</td>
    </tr>
    <tr>
      <th>56851</th>
      <td>1089862</td>
      <td>2</td>
      <td>이용자들이 가장 많이 검색한 혜택은 교통(14.9%)이었다. 평균 사용 연령층이 더...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>Neutral</td>
      <td>[-2.1390669345855713, 2.4953033924102783, 0.01...</td>
      <td>0.533359</td>
    </tr>
    <tr>
      <th>56852</th>
      <td>1089862</td>
      <td>3</td>
      <td>따라서 올해에는 무실적, 또는 실적 조건이 낮아 사용 부담이 적으면서 모든 가맹점에...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>Neutral</td>
      <td>[-2.3649559020996094, 2.436711072921753, 0.312...</td>
      <td>0.886730</td>
    </tr>
    <tr>
      <th>56853</th>
      <td>1089863</td>
      <td>0</td>
      <td>제 39차 부동산시장 점검 관계장관회의\n홍남기 부총리 겸 기획재정부 장관이 23일...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>Neutral</td>
      <td>[-1.901430368423462, 1.5780322551727295, 0.729...</td>
      <td>0.384297</td>
    </tr>
  </tbody>
</table>
<p>56854 rows × 7 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">category_preds_df</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;esg_categories-preds.parquet&quot;</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">)</span>
<span class="n">category_preds_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;esg_categories-preds.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/esg_categories-preds.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/esg_categories-preds.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>chunk_id</th>
      <th>text</th>
      <th>filename</th>
      <th>pred_labels</th>
      <th>raw_preds</th>
      <th>pred_probs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1303</td>
      <td>0</td>
      <td>대신증권은 미국 정규시장이 열리기 2시간 30분 전부터 미국 주식을 거래할 수 있는...</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.3635081648826599, 0.37070703506469727, -0....</td>
      <td>0.641072</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1304</td>
      <td>0</td>
      <td>[디지털뉴스국 news@mkinternet.com]</td>
      <td>02100311.20201101100459001.txt</td>
      <td>S-소비자</td>
      <td>[-0.1256369799375534, 0.20957696437835693, 0.0...</td>
      <td>0.506109</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1309</td>
      <td>0</td>
      <td>코스피가 외국인이 대규모 순매수세를 보인 가운데 보합권에서 마감했다.\n6일 코스피...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.8959301710128784, 1.594657301902771, -0.44...</td>
      <td>0.346036</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1309</td>
      <td>1</td>
      <td>시가총액 상위 종목들은 흐름이 엇갈렸다. LG화학이 6% 이상 뛰었고 셀트리온, 삼...</td>
      <td>02100311.20201101102709001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9104948043823242, 1.5245412588119507, -0.5...</td>
      <td>0.853084</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1310</td>
      <td>0</td>
      <td>롯데쇼핑은 올해 3분기 영업이익(연결 기준)이 1110억원으로 전년 동기대비 26....</td>
      <td>02100311.20201101103117001.txt</td>
      <td>G-주주환원</td>
      <td>[-0.9264926910400391, 1.6014995574951172, -0.6...</td>
      <td>0.875771</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>56849</th>
      <td>1089862</td>
      <td>0</td>
      <td>[출처=카드고릴라]\n카드사들이 연초부터 연일 신상품을 쏟아내고 있다. 새 카드로 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.22719579935073853, 0.01108001358807087, 0....</td>
      <td>0.322013</td>
    </tr>
    <tr>
      <th>56850</th>
      <td>1089862</td>
      <td>1</td>
      <td>가장 인기가 많은 카드사는 신한카드였다. 신한카드는 개별 상품페이지 관련 23%의 ...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.4069870114326477, 0.3556715250015259, 0.29...</td>
      <td>0.396827</td>
    </tr>
    <tr>
      <th>56851</th>
      <td>1089862</td>
      <td>2</td>
      <td>이용자들이 가장 많이 검색한 혜택은 교통(14.9%)이었다. 평균 사용 연령층이 더...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.2538611888885498, 0.12173940986394882, 0.1...</td>
      <td>0.406933</td>
    </tr>
    <tr>
      <th>56852</th>
      <td>1089862</td>
      <td>3</td>
      <td>따라서 올해에는 무실적, 또는 실적 조건이 낮아 사용 부담이 적으면서 모든 가맹점에...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[-0.3447725772857666, 0.5259126424789429, 0.19...</td>
      <td>0.784171</td>
    </tr>
    <tr>
      <th>56853</th>
      <td>1089863</td>
      <td>0</td>
      <td>제 39차 부동산시장 점검 관계장관회의\n홍남기 부총리 겸 기획재정부 장관이 23일...</td>
      <td>02100851.20220223082114001.txt</td>
      <td>S-소비자</td>
      <td>[0.4430272877216339, 0.10475224256515503, 1.87...</td>
      <td>0.296401</td>
    </tr>
  </tbody>
</table>
<p>56854 rows × 7 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">code_info_available</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;econ_news_code_info_available.parquet&quot;</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">)</span>
<span class="n">code_info_available</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;econ_news_code_info_available.parquet&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/econ_news_code_info_available.parquet&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/econ_news_code_info_available.parquet
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filename</th>
      <th>codes</th>
      <th>len</th>
      <th>num_codes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>02100201.20200102152718001.txt</td>
      <td>144960</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02100201.20200102164904001.txt</td>
      <td>285130</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>02100201.20200103151007001.txt</td>
      <td>088800</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>02100201.20200103155237001.txt</td>
      <td>178920</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>02100201.20200107154901001.txt</td>
      <td>007660</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>108945</th>
      <td>02100311.20220531185816001.txt</td>
      <td>011070</td>
      <td>124</td>
      <td>14</td>
    </tr>
    <tr>
      <th>108946</th>
      <td>02100501.20220516100127001.txt</td>
      <td>139670</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>108947</th>
      <td>02100701.20220531153710002.txt</td>
      <td>064960</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>108948</th>
      <td>02100801.20220516111438002.txt</td>
      <td>005930</td>
      <td>33</td>
      <td>1</td>
    </tr>
    <tr>
      <th>108949</th>
      <td>02100851.20220516010042001.txt</td>
      <td>003620</td>
      <td>33</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>108950 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;chunk_id&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="s1">&#39;pred_labels&#39;</span><span class="p">]</span>
<span class="n">c_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;chunk_id&#39;</span><span class="p">,</span> <span class="s1">&#39;pred_labels&#39;</span><span class="p">]</span>
<span class="n">pred_data</span> <span class="o">=</span> <span class="n">polarity_preds_df</span><span class="p">[</span><span class="n">p_cols</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pred_labels&quot;</span><span class="p">:</span> <span class="s2">&quot;pred_polarity&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">category_preds_df</span><span class="p">[</span><span class="n">c_cols</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pred_labels&quot;</span><span class="p">:</span> <span class="s2">&quot;pred_category&quot;</span><span class="p">}),</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;chunk_id&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">code_info_available</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;filename&#39;</span>
<span class="p">)</span>

<span class="n">xls_path</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;esg_preds_all.xlsx&quot;</span><span class="p">)</span>
<span class="n">pred_data</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">xls_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">codes</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;codes.csv&quot;</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;codes&quot;</span><span class="p">:</span><span class="s2">&quot;str&quot;</span><span class="p">})</span>
<span class="n">xls_path</span> <span class="o">=</span> <span class="n">eKonf</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s2">&quot;esg_preds.xlsx&quot;</span><span class="p">)</span>
<span class="n">pred_data</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">xls_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO:ekorpkit.io.file:Processing [1] files from [&#39;codes.csv&#39;]
INFO:ekorpkit.io.file:Loading 1 dataframes from [&#39;../data/econ_news_kr/codes.csv&#39;]
INFO:ekorpkit.io.file:Loading data from ../data/econ_news_kr/codes.csv
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./docs/usecases/esg"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="classifiers.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Training Classifiers for ESG Ratings</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../research/esg_topics/analyst.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ESG Topic Analysis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Young Joon Lee<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>